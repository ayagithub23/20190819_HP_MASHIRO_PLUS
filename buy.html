<!DOCTYPE html>
<html lang="zh-tw">

<head>
  <meta charset="UTF-8">
  <title>馬上購入 | MASHIRO+雪之凝麥飯石洗面乳</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="MASHIRO+雪之凝麥飯石洗面乳｜淨膚膜型洗面乳，可以每天用的毛孔清潔保養品。酵素分解老廢角質及油汙，麥飯石洗淨毛孔髒污，溫和地深層清潔，清爽透亮不緊繃。添加18種美容保濕成分，30秒透亮一色階。">
  <meta name="Keywords" content="洗面乳,麥飯石,麥飯石洗面乳,美白洗面乳 毛孔清潔,去角質 ,保濕洗面乳,雪之凝,MASHIRO">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="resources/homepage/css/slick.css">
  <link rel="stylesheet" href="resources/homepage/css/slick-theme.css">
  <link rel="stylesheet" href="resources/homepage/css/slick-custom.css">
  <link rel="stylesheet" href="resources/homepage/css/style.css">
  <link rel="stylesheet" href="resources/homepage/css/qa.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="resources/homepage/js/slick.js"></script>
  <script src="resources/homepage/js/app.js"></script>
</head>

<body>
  <div id="wrap">
    <!-- CHECKBOX -->
    <input type="checkbox" name="" id="menuControl">
    <!-- HEADER -->
    <div class="header">
      <div class="logo"><a href="index.html"><img src="resources/homepage/images/logo_header.png"></a></div>
      <label for="menuControl" class="menuHamburger">
        <span></span>
        <span></span>
        <span></span>
      </label>
      <nav>
        <a href="index.html">首　頁</a>
        <a href="element.html">主要成分</a>
        <a href="products.html">產品介紹</a>
        <a href="reviews.html">使用心得</a>
        <a href="faq.html">常見問題</a>
        <a href="buy.html">馬上購入<i class="fa fa-shopping-cart"></i><span>FREE SHIPPING 台灣國內免運費</span></a>
      </nav>
    </div>
    <!-- MAIN -->
    <div class="main">
      <h1 class="elementText">馬上購入</h1>
      <!-- MAIN CONTENT -->
      <div class="mainContent">
        <!-- ./ MAIN CONTENT TABLE -->
        <div class="mainContentTable buyGridWidth">
          <div class="divTable">
            <div class="divTableBody">
              <div class="divTableRow">
                <div class="divTableCell">&nbsp;</div>
                <div class="divTableCell"><img src="resources/homepage/images/offer_s01.png" alt=""></div>
                <div class="divTableCell"><img src="resources/homepage/images/offer_s01.png" alt=""></div>
                <div class="divTableCell"><img src="resources/homepage/images/offer_s04.png" alt=""></div>
              </div>
              <div class="divTableRow">
                <div class="divTableCell">價　　格</div>
                <div class="divTableCell">2,000元<br class="br">(原價)</div>
                <div class="divTableCell">1,340元<br class="br"><span>(67折)</span></div>
                <div class="divTableCell">4,380元<br class="br">(73折)</div>
              </div>
              <div class="divTableRow">
                <div class="divTableCell">退費保證</div>
                <div class="divTableCell"><span>無</span><span>X</span></div>
                <div class="divTableCell"><span>有</span><span>退費保證</span></div>
                <div class="divTableCell"><span>無</span><span>X</span></div>
              </div>
              <div class="divTableRow">
                <div class="divTableCell">運　　費</div>
                <div class="divTableCell">免運費</div>
                <div class="divTableCell">免運費</div>
                <div class="divTableCell">免運費</div>
              </div>
              <div class="divTableRow">
                <div class="divTableCell">&nbsp;</div>
                <div class="divTableCell"><a onclick="productChange(321)">原價訂購</a></div>
                <div class="divTableCell"><a onclick="productChange(323)">定期訂購</a></div>
                <div class="divTableCell"><a onclick="productChange(324)">透亮訂購</a></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <style>
        #contents {
          max-width: 916px;
          margin: auto;
          width: 90%;
        }
      </style>
      <div id="form">


        <script type="text/javascript" src="resources/js/jquery.min.js"></script>
        <script type="text/javascript" src="resources/js/jquery-ui.min.js"></script>
        <script type="text/javascript" src="resources/js/jquery.ui.datepicker-zh-CN.js"></script>
        <link href="resources/css/content.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" type="text/css" href="resources/css/jquery-ui.css" media="all" />
        <script type="text/javascript" src="resources/js/jquery.zip2addr.js"></script>
        <script type="text/javascript" src="../www.emetore-tw.com/js/moment.js"></script>
        <script>
          function preLoad() {
            $('body').append("<div class='bgModal'></div>");
            $('#btnSend').prop('disabled', true).text("Processing");
          }
        </script>
        <script type="text/javascript">
          <!--
          //日付選択
          $(function () {
            $('.datepicker').datepicker({
              changeMonth: true,
              changeYear: true,
              showOn: "both",
              yearRange: '1901:2022',
              buttonImage: "images/calender.png"
            });
            var dt = new Date();
            $(".datepicker").datepicker("setDate", (dt.getFullYear() - 30) + "-" + (dt.getMonth() + 1) + "-" + dt
              .getDate());
          });
          // 
          -->
        </script>
        <script src="../p01.mul-pay.jp/ext/js/token.js"></script>
        <script type="text/javascript">
          function execPurchase(response) {
            if (response.resultCode != "000") {
              window.alert("輸入的信用卡資訊不正確。錯誤資訊:" + response.resultCode);
              $("#ec_client_landing_page_type_token").val("");
            } else {
              //カード情報は念のため値を除去
              $("#ec_client_landing_page_type_cardno").val("");
              $("#ec_client_landing_page_type_exp_mm").val("");
              $("#ec_client_landing_page_type_exp_yy").val("");
              $("#ec_client_landing_page_type_csc").val("");
              $("#ec_client_landing_page_type_cardname").val("");
              $("#ec_client_landing_page_type_tokennumber").val("");
              $("#ec_client_landing_page_type_token").val(response.tokenObject.token);
              if (typeof preLoad === 'function') {
                preLoad();
              }
              $("#ec_client_landing_page_type").submit();
            }
          }

          function doPurchase() {
            $("#ec_client_landing_page_type").submit();
            preLoad();
            return;
            var cardno, expire, securitycode, holdername;
            cardno = $("#ec_client_landing_page_type_cardno").val();
            expire = $("#ec_client_landing_page_type_exp_yy").val() + $("#ec_client_landing_page_type_exp_mm").val();
            securitycode = $("#ec_client_landing_page_type_csc").val();
            holdername = $("#ec_client_landing_page_type_cardname").val();
            tokennumber = 2;
            Multipayment.init("9102080068423");
            Multipayment.getToken({
              cardno: cardno,
              expire: expire,
              securitycode: securitycode,
              holdername: holdername,
              tokennumber: tokennumber
            }, execPurchase);
          }
        </script>
        <script>
          function getInfo(skuid, selectedValue, type, nullString, selectId, def, deny) {
            def = typeof def !== 'undefined' ? def : 0;
            deny = typeof deny !== 'undefined' ? deny : [];

            $.ajax({
              type: "POST",
              async: true,
              url: "/ajax/changeRegular",
              dataType: "json",
              data: {
                "skuId": skuid,
                "type": type,
                "domain": "clients",
              },
            }).done(function (result) {
              if (result.length > 0) {
                var addHtml = '<option value="">' + nullString + '</option>';
                for (var i = 0; i < result.length; i++) {
                  var data = result[i];
                  if (deny.indexOf(data.key) === -1) {
                    if (selectedValue == data.key || def == data.key) {
                      addHtml += '<option value="' + data.key + '" selected>' + data.value + '</option>';
                    } else {
                      addHtml += '<option value="' + data.key + '">' + data.value + '</option>';
                    }
                  }
                }
                $("#" + selectId).empty();
                $('#' + selectId).append(addHtml);
                if (type == "del" && selectedValue == "") {
                  if ($('#ec_client_landing_page_type_delivery_abroad').find("option:eq(0)").prop("selected")) {
                    $('#ec_client_landing_page_type_delivery_abroad').find("option:eq(1)").prop("selected", true)
                      .change();
                  }
                }
                if (type == "pay") {
                  $('#ec_client_landing_page_type_payment').change();
                }
              }
            }).fail(function (result) {});
          }

          function getDeliveryDayTime(type, selectedValue, maxDay, selectId, nullString, def, closeday, callback) {
            def = typeof def !== 'undefined' ? def : 0;
            closeday = typeof closeday !== 'undefined' ? closeday : 0;
            var flag = 'ab';
            var deliveryId = $("#ec_client_landing_page_type_delivery_abroad").val();
            if (!deliveryId) {
              flag = 'd';
              deliveryId = $("#delivery_id").val();
            }
            var pType = 'normal';
            if ($("#ec_client_landing_page_type_regular_interval").val()) {
              pType = 'regular';
            }

            $.ajax({
              type: "POST",
              async: true,
              url: "/ajax/changeDelivery",
              dataType: "json",
              data: {
                "flag": flag,
                "id": deliveryId,
                "type": type,
                "max": maxDay,
                "pType": pType,
                "closeday": closeday
              },
            }).done(function (result) {
              if (result.length > 0) {
                //var addHtml = '<option value="">' + nullString + '</option>';
                var addHtml = '<option value="" disabled selected>希望配達日</option><option value="">不指定</option>';

                for (var i = 0; i < result.length; i++) {
                  var data = result[i];
                  if (selectedValue == data.key || def == data.key) {
                    addHtml += '<option value="' + data.key + '" selected>' + data.value + '</option>';
                  } else {
                    addHtml += '<option value="' + data.key + '">' + data.value + '</option>';
                  }
                }

                $("#" + selectId).empty();
                $("#" + selectId).append(addHtml);
                if (callback) {
                  callback();
                }
              }
            }).fail(function (result) {});
          }
        </script>
        <div id="contents">
          <div id="main">
            <form id="ec_client_landing_page_type" name="cartin"
              action="https://www.mashiroplus.tw/ec/landing_page/settlement/buy/21#ec_client_landing_page_type"
              method="post">

              <input type="hidden" id="ec_client_landing_page_type__token" name="ec_client_landing_page_type[_token]"
                value="3eie2b-P9F1St6prwmq9Ee6zZpI7exm3yREWJ8lyuQY" />
              <input type="hidden" id="ec_client_landing_page_type_token" name="ec_client_landing_page_type[token]" />
              <input type="hidden" id="ec_client_landing_page_type_tokennumber"
                name="ec_client_landing_page_type[tokennumber]" value="2" /> <input type="hidden"
                id="ec_client_landing_page_type_shop_transaction_no"
                name="ec_client_landing_page_type[shop_transaction_no]" /> <input type="hidden"
                id="ec_client_landing_page_type_authentication_token"
                name="ec_client_landing_page_type[authentication_token]" />
              <article>
                <div class="itemWrap cf">
                  <input type="hidden" id="ec_client_landing_page_type_product_id"
                    name="ec_client_landing_page_type[product_id]" value="21" />
                  <input type="hidden" name="product_sku_id" value="323">
                  <section class="pageContent">
                    <div class="pageBody">
                      <section class="payForm">
                        <h3>訂單開始</h3>
                        <table id="priceTable" class="noBlock">
                          <tbody>
                            <tr>
                              <th>商品(請選擇)</th>
                              <th>價格</th>
                              <th>數量</th>
                              <th>總計</th>
                            </tr>
                            <tr>
                              <td>
                                <select id="ec_client_landing_page_type_product_sku_id"
                                  name="ec_client_landing_page_type[product_sku_id]">
                                  <!--<option value="" data-price="">請選擇</option>-->
                                  <option value="323" data-price="1340" data-type="regular_group"
                                    data-regular_interval="10" data-unit_front="" data-unit_back="">麥飯石洗面乳45天定期</option>
                                  <option value="324" data-price="4380" data-type="common_group"
                                    data-regular_interval="" data-unit_front="" data-unit_back="">麥飯石洗面乳3入組合</option>
                                  <option value="321" data-price="2000" data-type="common" data-regular_interval=""
                                    data-unit_front="" data-unit_back="">雪之凝 麥飯石洗面乳</option>
                                </select>
                                <div id="regular_hidden"></div>
                              </td>
                              <td>
                                <strong>
                                  <span class="skuPrice2">-</span>
                                </strong>
                              </td>
                              <td>
                                <select id="ec_client_landing_page_type_quantity" name="" class="refer">
                                  <option value="1">1</option>
                                </select>
                                <input type="hidden" id="tmp_quantity" name="tmp_quantity" value="">
                                <span class="error"></span>
                              </td>
                              <td>
                                <span class="payment_total"></span> TWD
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <div class="pymRgrTxt">
                          <p>※請務必閱讀以下說明。<span class="important">完成訂購即視同理解並同意本購買方式。</span></p>
                          <p><span>&lt;定期方案說明&gt;</span></p>
                          <p>(1)完成本方案的首期訂購後，每隔約45天，您還會收到下一期的商品。<br><span
                              class="important">系統會定期為您自動下單並出貨，直到您取消本方案為止。</span><br>也就是「即使您沒有再次下單購買，也會持續收到產品」的訂購方式。
                            <br>例如:<br>4/01第一次您主動訂購付款，4/05收到第一期商品。<br>5/15第二次訂單自動產生，<span
                              class="important">自動扣款</span>，5/20收到第二期商品。<br>7/01第三次訂單自動產生，<span
                              class="important">自動扣款</span>，7/05收到第三期商品。<br>(以上只供舉例參考，實際日期等狀況因人而異)<br></p>
                          <p>(2)<span class="important">本方案並沒有強制綁約，</span>若您不希望繼續購買，<br><span
                              class="important">只需要在下一期商品寄出的「10天前」，</span>撥打客服專線(02-2366-1900)取消即可。</p>
                          <p>(3)定期方式在日本相當普遍，只要下單填寫一次資料，商品就會每隔一段時間自動送到家， <br>不只非常方便、省時，還能透過持續不中斷的使用，發揮產品最大效果。
                            <br>※若您對定期方案還有疑問，歡迎撥打客服專線(02-2366-1900)，<br>愛凱全體員工都很樂意為您詳細說明，謝謝。 </p>
                        </div>
                        <div class="pymNmlTxt"></div>
                      </section>
                      <section class="payForm">
                        <h3>客戶資訊</h3>
                        <table class="spForm01">
                          <tbody>
                            <tr class="sex">
                              <th>姓名<span class="required">需要</span></th>
                              <td class="required">
                                <div class="col2">
                                  <span class="formParts required"><input type="text"
                                      id="ec_client_landing_page_type_last_name"
                                      name="ec_client_landing_page_type[last_name]" required="required" maxlength="255"
                                      class="checkZen" placeholder="姓" /></span>
                                  <span class="formParts required"><input type="text"
                                      id="ec_client_landing_page_type_first_name"
                                      name="ec_client_landing_page_type[first_name]" required="required" maxlength="255"
                                      class="checkZen" placeholder="名" /></span>
                                </div>
                                <span class="error"></span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <tr class="div">
                              <th>性別<span class="required">需要</span></th>
                              <td class="required">
                                <div class="col2">
                                  <span class="formParts required">
                                    <div id="ec_client_landing_page_type_sex" class="checkZen" placeholder="姓"><input
                                        type="radio" id="ec_client_landing_page_type_sex_0"
                                        name="ec_client_landing_page_type[sex]" value="1" /><label
                                        for="ec_client_landing_page_type_sex_0">男性</label><input type="radio"
                                        id="ec_client_landing_page_type_sex_1" name="ec_client_landing_page_type[sex]"
                                        value="2" /><label for="ec_client_landing_page_type_sex_1">女性</label></div>
                                  </span>
                                </div>

                              </td>
                            </tr>
                            <tr class="section">
                              <th>生日<span class="required">需要</span></th>
                              <td>
                                <div class="calender">
                                  <span class="formParts required widLong"><input type="text"
                                      id="ec_client_landing_page_type_birthday"
                                      name="ec_client_landing_page_type[birthday]" readonly="readonly"
                                      class="datepicker" maxlength="10" autocomplete="off" placeholder="年-月-日" /></span>
                                </div>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <input type="hidden" name="ec_client_landing_page_type[country]" value="11"
                              id="ec_client_landing_page_type_country">
                            <input type="hidden" id="ec_client_landing_page_type_district"
                              name="ec_client_landing_page_type[district]" value="lp_district">
                            <tr>
                              <th>市縣鄉鎮村<span class="required">需要</span></th>
                              <td class="required">
                                <span class="formParts required widLong">
                                  <select id="city" name="city">
                                    <option value="">縣市</option>
                                    <option value="臺北市">臺北市</option>
                                    <option value="基隆市">基隆市</option>
                                    <option value="新北市">新北市</option>
                                    <option value="宜蘭縣">宜蘭縣</option>
                                    <option value="新竹市">新竹市</option>
                                    <option value="新竹縣">新竹縣</option>
                                    <option value="桃園市">桃園市</option>
                                    <option value="苗栗縣">苗栗縣</option>
                                    <option value="臺中市">臺中市</option>
                                    <option value="彰化縣">彰化縣</option>
                                    <option value="南投縣">南投縣</option>
                                    <option value="嘉義市">嘉義市</option>
                                    <option value="嘉義縣">嘉義縣</option>
                                    <option value="雲林縣">雲林縣</option>
                                    <option value="臺南市">臺南市</option>
                                    <option value="高雄市">高雄市</option>
                                    <option value="澎湖縣">澎湖縣</option>
                                    <option value="屏東縣">屏東縣</option>
                                    <option value="臺東縣">臺東縣</option>
                                    <option value="花蓮縣">花蓮縣</option>
                                    <option value="金門縣">金門縣</option>
                                    <option value="連江縣">連江縣</option>
                                  </select>
                                  <select id="street" name="street">
                                    <option value="">區域</option>
                                  </select>
                                  <input type="hidden" id="ec_client_landing_page_type_locality"
                                    name="ec_client_landing_page_type[locality]" required="required" value="">
                                </span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <tr id="zipcode_tr">
                              <th>郵遞區號<span class="required">需要</span></th>
                              <td class="required">
                                <span class="formParts required widLong">
                                  <input type="text" id="ec_client_landing_page_type_zipcode"
                                    name="ec_client_landing_page_type[zipcode]" size="10" maxlength="255"
                                    placeholder="104" class="yubin" /><br>
                                </span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <tr class="section">
                              <th>地址<span class="required">需要</span></th>
                              <td class="required">
                                <span class="formParts required widLong"><input type="text"
                                    id="ec_client_landing_page_type_street" name="ec_client_landing_page_type[street]"
                                    required="required" maxlength="255" class="text1" placeholder="地址" /></span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <tr class="section">
                              <th>手機號碼<span class="required">需要</span></th>
                              <td>
                                <span class="formParts required widLong">
                                  <input type="text" id="ec_client_landing_page_type_tel"
                                    name="ec_client_landing_page_type[tel]" maxlength="255" size="20"
                                    placeholder="數字10碼，不需要【–】橫槓記號。" />
                                </span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <tr class="section">
                              <th>電子郵件<span class="required">需要</span></th>
                              <td class="required">
                                <span class="formParts required widLong"><input type="text"
                                    id="ec_client_landing_page_type_email" name="ec_client_landing_page_type[email]"
                                    maxlength="255" class="checkMail" placeholder="xxxx@xxxx" onpaste="return false;"
                                    onCopy="return false" /></span><br>
                                <!-- メールアドレス二重チェック -->
                                <span class="formParts required">
                                  <input type="text" class="mail" name="mail_check" id="mail_check"
                                    placeholder="請再次輸入：xxxx@xxxx" onpaste="return false;" onCopy="return false" required
                                    value="" />
                                  <label id="mail_check-error" style="display: none;" class="error" for="mail_check"> ⓧ
                                    輸入的郵件地址不一致</label>
                                </span>
                                <span class="error"></span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </section>
                      <style>
                        .pageContent .payForm .mail.error {
                          font-weight: normal;
                        }

                        .pageContent .payForm #mail_check-error.error {
                          font-size: 20px;
                        }
                      </style>
                      <section class="payForm">
                        <h3>付款方式</h3>
                        <table>
                          <tbody>
                            <tr>
                              <th>請選擇付款方式<span class="required">需要</span></th>
                              <td class="required">
                                <span class="formParts required widHalf">
                                  <input type="hidden" id="pay_id" value="">
                                  <select name="ec_client_landing_page_type[payment]"
                                    id="ec_client_landing_page_type_payment">
                                    <option value="">請選擇付款方式</option>
                                  </select>
                                </span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <!-- <tr class="card">
                                    <td colspan="2">
                                      <p class="note">
                                      <span class="important">※選擇信用卡付款的客人請注意※</span><br>
                                      （１）本產品是由日本直接寄送，視同海外交易。故當您選擇信用卡付款時，會因為每間信用卡公司的規定不同，以及您與信用卡公司的合約內容不同，產生額外費用。由於上述原因，您的信用卡對帳單中扣除的商品價格，會與本頁面的表示價格有落差（受日幣匯率浮動影響）。另外，您也可能需要支付國外交易手續費，此費用是由信用卡公司收取，本公司恕不負擔。<br>
                                      （２）退款時，依當下匯率進行退款。因退款所產生的任何手續費，本公司恕不負擔，敬請見諒。<br>
                                      （３）若您對匯率與國外交易手續費有任何疑問，請聯絡您的信用卡發卡公司查詢，本客服中心無法代查，敬請見諒。<br>
                                        （４）若您選擇以信用卡訂購「定期方案」，則視同您同意授權日商優橋股份有限公司在定期方案未被取消的期間內，於每期出貨前主動固定以信用卡扣款。</p>
                                    </td>
                                    </tr> -->
                            <tr class="card">
                              <th>信用卡卡號<span class="required">需要</span></th>
                              <td class="required"><span class="formParts required widLong"><input type="text"
                                    id="ec_client_landing_page_type_cardno" name="ec_client_landing_page_type[cardno]"
                                    required="required" size="24" maxlength="16" placeholder="1234567890123456"
                                    class="checkNumber" /><span class="error"></span></span><br>
                                請用半角數字輸入
                              </td>
                            </tr>
                            <tr class="card">
                              <th>安全碼<span class="required">需要</span></th>
                              <td class="required"><span class="formParts required"><input type="text"
                                    id="ec_client_landing_page_type_csc" name="ec_client_landing_page_type[csc]"
                                    required="required" size="6" /><span class="error"></span></span><br>
                                ・如使用VISA，MasterCard，JCB，Diners時，（請參照下圖A）<br>
                                卡片背面簽名欄末三碼數字<br>
                                ・如使用American Express時，（請參照下圖B）<br>
                                卡片正面右上（或者左上）的四碼數字<br>
                                <img src="images/securitycode.gif" alt="securitycode" title="securitycode" />
                              </td>
                            </tr>
                            <tr class="card">
                              <th>信用卡有效日期<span class="required">需要</span></th>
                              <td class="required"><span class="formParts required"><select
                                    id="ec_client_landing_page_type_exp_mm" name="ec_client_landing_page_type[exp_mm]"
                                    required="required">
                                    <option value="" selected="selected">請選擇</option>
                                    <option value="01">01</option>
                                    <option value="02">02</option>
                                    <option value="03">03</option>
                                    <option value="04">04</option>
                                    <option value="05">05</option>
                                    <option value="06">06</option>
                                    <option value="07">07</option>
                                    <option value="08">08</option>
                                    <option value="09">09</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                  </select></span>&nbsp;/&nbsp;<span class="formParts"><select
                                    id="ec_client_landing_page_type_exp_yy" name="ec_client_landing_page_type[exp_yy]"
                                    required="required">
                                    <option value="" selected="selected">請選擇</option>
                                    <option value="19">2019</option>
                                    <option value="20">2020</option>
                                    <option value="21">2021</option>
                                    <option value="22">2022</option>
                                    <option value="23">2023</option>
                                    <option value="24">2024</option>
                                    <option value="25">2025</option>
                                    <option value="26">2026</option>
                                    <option value="27">2027</option>
                                    <option value="28">2028</option>
                                    <option value="29">2029</option>
                                    <option value="30">2030</option>
                                    <option value="31">2031</option>
                                    <option value="32">2032</option>
                                    <option value="33">2033</option>
                                    <option value="34">2034</option>
                                    <option value="35">2035</option>
                                    <option value="36">2036</option>
                                    <option value="37">2037</option>
                                    <option value="38">2038</option>
                                    <option value="39">2039</option>
                                  </select></span><span class="error"></span><span class="error"></span>
                                <br>
                                ※請注意，通常有效日期為月／年的順序表示
                              </td>
                            </tr>
                            <input type="hidden" name="ec_client_landing_page_type[paymode]"
                              id="ec_client_landing_page_type_paymode" value="1">
                            <tr class="after_pay">
                              <th><img src="images/afterpay.png"></th>
                              <td>
                                <p>「<span class="important">出貨日隔天起算9天內</span>」再前往<span
                                    class="important">便利超商</span>或者是<span class="important">ATM付款</span>的付款方式。</p>
                                <p>繳款代碼會以E-mail等方式寄送，再至附近的便利超商或ATM繳款即可。</p>
                                <p><span class="important">您將可能收到來自【後付款服務中心】的email，或致電與您確認訂單資訊,屆時敬請協助配合。</span></p>
                                <p>&nbsp;</p>
                                <p>「後付款」，為「後付款」支付服務提供公司（三環亞洲股份有限公司）所提供的服務。</p>
                                <p>顧客訂購商品時適用「後付款」服務，於服務範圍内提供個人情報並且讓渡商品代金債權。</p>
                                <p>請點選「後付款」的標誌，確認詳細內容。 </p>
                                <p>&nbsp;</p>
                                <p><img src="resources/images/afterpay.png"></p>
                                <p><a href="https://www.afterpay.com.tw/customer"
                                    target="_blank">https://www.afterpay.com.tw/customer</a></p>
                                <p class="mB5">親愛的顧客請確認所有規約後，開始訂購商品。 </p>
                                　
                                <p>【注意事項】</p>
                                <p>・請於收到付款通知後9天以内繳款。</p>
                                <p>・使用「後付款」服務的金額上限為，（含複数店舗）累計10,000元(NTD)。 超過10,000元(NTD)時，請使用其他結帳方式。</p>
                                <p>・購物時如使用「後付款」服務，需要進行能否利用此服務之審査。審査結果如為「不可」時， 請選擇使用其他的結帳方式。 </p>
                                <p>・至繳費期限為止，如未完成繳納 ，除了以年率5%（日息1.370/10000）作為延遲利息外，
                                  另需加上延遲利息的年率20%（日息5.480/10000）作為延遲損害金，一併請求支付。</p>
                              </td>
                            </tr>
                            <tr class="np_atobarai">
                              <th><img src="system/images/logo_Aftee.jpg"></th>
                              <td>
                                <p><img src="system/images/bnr_Aftee.jpg"></p>
                                <p>&nbsp;</p>
                                <p>○關於「AFTEE」後支付</p>
                                <p>AFTEE是在收到商品之後，才付款的支付方式。</p>
                                <p>不須輸入繁瑣的個人資料，也不須登錄會員即可立即免費使用！</p>
                                <p>商品寄出後，將透過簡訊寄送繳費通知。</p>
                                <p>請於收到繳費通知隔日起14天內依照內容指示，</p>
                                <p>透過便利商店代收服務或ATM繳費等方式完成付款手續。</p>
                                <p>&nbsp;</p>
                                <p>・注意事項</p>
                                <p>透過由日商恩沛股份有限公司提供之「AFTEE」後支付服務完成的交易，</p>
                                <p>需依本服務之必要範圍內提供個人資料，</p>
                                <p>並將交易相關給付款項請求債權轉讓予日商恩沛股份有限公司。</p>
                                <p>關於個人資料處理事宜，請瀏覽以下網址：</p>
                                <p><a href="https://aftee.tw/privacypolicy/">https://aftee.tw/privacypolicy/</a></p>
                                <p>初次使用AFTEE時，最高使用額度為10,000元。</p>
                                <p>若款項超過繳費期限，將根據當次的金額加收年利率20%的支付遲延損害金。</p>
                                <p>未成年的使用者，請事先徵得法定代理人或監護人之同意方可使用AFTEE。</p>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </section>
                      <section class="payForm">
                        <h3>送貨方式</h3>
                        <table>
                          <tbody>
                            <tr>
                              <th rowspan="2">送貨方式<span class="required">需要</span></th>
                              <td class="required">
                                <span id="delivery_name">選擇國家後，系統會為您自動選擇發貨方式。</span>
                                <span class="formParts required">
                                  <input type="hidden" id="del_id" value="">
                                  <select name="ec_client_landing_page_type[delivery_abroad]"
                                    id="ec_client_landing_page_type_delivery_abroad">
                                    <option value="">請選擇送貨方式</option>
                                  </select>
                                  ※免運費
                                </span>
                                <span class="error"></span>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <input type="hidden" id="day_value" value="">
                                <select name="ec_client_landing_page_type[delivery_day]"
                                  id="ec_client_landing_page_type_delivery_day">
                                  <option value="">希望配達日</option>
                                </select>
                                <input type="hidden" id="time_value" value="">
                                <select name="ec_client_landing_page_type[delivery_time]"
                                  id="ec_client_landing_page_type_delivery_time">
                                  <option value="">希望配達時段</option>
                                </select>
                                <br>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </section>
                      <p class="cartButton"><button type="button" class="btnCartIn" id="btnSend"><i
                            class="fa fa-2x fa-shopping-cart"></i>完成購買</button></p>
                      <ul class="linkPrivacy">
                        <li>※關於商品介紹可能會以電子郵件形式發送，點擊完成購買按鈕後，視為同意。</li>
                      </ul>
                    </div>
                  </section>
                  <!-- レート情報 -->
                  <input type="hidden" name="ec_client_landing_page_type[option1]" value="">
                  <input type="hidden" name="ec_client_landing_page_type[option2]" value="">
                  <input type="hidden" name="ec_client_landing_page_type[option3]" value="">
                  <input type="hidden" name="ec_client_landing_page_type[option4]" value="">
                  <input type="hidden" name="ec_client_landing_page_type[option5]" value="">
                  <!-- /レート情報 -->
                  <input type="hidden" name="ec_client_landing_page_type[option9]" value="buy">
                </div>
              </article>
            </form>
          </div>
        </div>
        <!--<script type="text/javascript">
    $(function(){
      $('.datepicker').datepicker({
        changeMonth: true, 
        changeYear: true,
        showOn: "both",
        yearRange: '1901:2022',
        buttonImage: "/resources/images/calender.png"
      });
      var dt = new Date();
    });  
    </script>-->
        <script>
          $(document).ready(function () {

            var toDoubleDigits = function (num) {
              num += "";
              if (num.length === 1) {
                num = "0" + num;
              }
              return num;
            };

            $("#ec_client_landing_page_type_delivery_abroad").on('change', function () {

              var addSaturday = function () {
                var deliveryId = $("#ec_client_landing_page_type_delivery_day option");
                for (var i = 0; i < deliveryId.length; i++) {
                  var data = deliveryId[i];
                  var date = new Date(data.value);
                  var weekday = ["日", "月", "火", "水", "木", "金", "土"];
                  wday = "（" + weekday[date.getDay()] + "）";
                  if (wday == "（金）") {
                    var day = date.getDate();
                    var year = date.getFullYear();
                    var month = toDoubleDigits(date.getMonth() + 1);
                    var after = date.getDate() + 1;
                    $(data).after($("<option>").val(year + "/" + month + "/" + after).text(year + "/" +
                      month + "/" + after));
                  }
                }
              }
              getDeliveryDayTime('day', $("#day_value").val(), 7, "ec_client_landing_page_type_delivery_day",
                "希望配達日", null, 0);
              getDeliveryDayTime('time', $("#time_value").val(), 2, "ec_client_landing_page_type_delivery_time",
                "希望配達時段", null, 1);
            });
          });
        </script>
        <script>
          var prices = {};
          var credit_card_id;
          var express_pay_id;
          var after_pay_id;
          var np_pay_id;
          prices['323'] = 1340;
          credit_card_id = 17;






          np_pay_id = "19";

          var TWD, JPY, ratio;
          var lcFormOption = {
            district_tr_reject: true,
            currency_abroad: "", //latestjsonを上書きする場合
            currency_jp: "", //latestjsonを上書きする場合
            hyphen_reject: true,
            deliveryTime: false,
            country_option_reject: [1]
          }
          var countryFormReject = {
            11: {
              "city_tr": true
            }
          }
          var validationInit = {
            "ec_client_landing_page_type_last_name": {
              "required": true,
            },
            "ec_client_landing_page_type_first_name": {
              "required": true,
            },
            "ec_client_landing_page_type_sex": {
              "required": true
            },
            "ec_client_landing_page_type_birthday": {
              "required": true
            },
            //"ec_client_landing_page_type_locality": {"required": true},
            "city": {
              "required": true
            },
            "street": {
              "required": true
            },
            "ec_client_landing_page_type_zipcode": {
              "required": true,
              "number": true
            },
            "ec_client_landing_page_type_street": {
              "required": true
            },
            "ec_client_landing_page_type_tel": {
              "required": true,
              "number": true,
              "eq": 10
            },
            "ec_client_landing_page_type_email": {
              "required": true,
              "email": true
            },
            "ec_client_landing_page_type_payment": {
              "required": true
            },
            "ec_client_landing_page_type_delivery_abroad": {
              "required": true
            }
          }

          var validationErrorWording = {
            "required": {
              "def": "入力してください.",
              "zh-tw": "請輸入."
            },
            "required_select": {
              "def": "項目を選択してください.",
              "zh-tw": "請輸入."
            },
            "min": {
              "def": "{min}文字以上入力してください",
              "zh-tw": "請輸入至少{min}個字符"
            },
            "max": {
              "def": "{max}文字以内で入力してください",
              "zh-tw": "請輸入{max}個字符以內"
            },
            "eq": {
              "def": "{eq}文字で入力してください",
              "zh-tw": "請輸入{eq}個字母"
            },
            "number": {
              "def": "半角数字で入力してください",
              "zh-tw": "半形數字10個字元（不要符號）"
            },
            "alpha": {
              "def": "半角英字で入力してください",
              "zh-tw": "Please enter only alphabet."
            },
            "katakana": {
              "def": "カタカナで入力してください",
              "zh-tw": "請輸入片假名"
            },
            "email": {
              "def": "正しいメールアドレスを入力してください",
              "zh-tw": "這個郵件地址不正確 "
            },
            "noHtml": {
              "def": "HTMLタグはご利用になれません",
              "zh-tw": "HTML無法輸入"
            }
          }
        </script>
        <script src="../auth.aftee.tw/v1/aftee.js"></script>
        <script type="text/javascript">
          var $product_sku_id = $('#ec_client_landing_page_type_product_sku_id');
          var $quantity = $('#ec_client_landing_page_type_quantity');
          var $payment_id = $('#ec_client_landing_page_type_payment');
          var $delivery_abroad_id = $('#ec_client_landing_page_type_delivery_abroad');
          var $country = $('#ec_client_landing_page_type_country');
          var $sex = $('#ec_client_landing_page_type_sex');
          var $zipcode = $('#ec_client_landing_page_type_zipcode');
          var $tel = $('#ec_client_landing_page_type_tel');
          var $prefecture = $('#ec_client_landing_page_type_district');
          var $first_name = $('#ec_client_landing_page_type_first_name');
          var $last_name = $('#ec_client_landing_page_type_last_name');
          var $locality = $('#ec_client_landing_page_type_locality');
          var $street = $('#ec_client_landing_page_type_street');
          var $np_flag = 0;

          var regular_product_ids = [{
            "skuId": "323",
            "regular_interval": "10"
          }, {
            "skuId": "324",
            "regular_interval": ""
          }, {
            "skuId": "321",
            "regular_interval": ""
          }];
          var post_product_sku_id = "";
          var post_payment = "";
          var post_delivery_abroad = "";

          post_product_sku_id = "";
          post_payment = "";
          post_delivery_abroad = "";

          $(document).ready(function () {
            $.getJSON("/latest.json", function (json) {
              TWD = json.rates.TWD;
              JPY = json.rates.JPY;
              if (lcFormOption.currency_abroad != "") {
                TWD = lcFormOption.currency_abroad
              }
              if (lcFormOption.currency_jp != "") {
                JPY = lcFormOption.currency_jp
              }
              ratio = TWD / JPY;

            });

            $(window).load(function () {
              showcredit();
              var set_product_sku_id = (post_product_sku_id) ? post_product_sku_id : regular_product_ids[0][
                'skuId'
              ];
              $product_sku_id.find("option[value=" + set_product_sku_id + "]").prop("selected", true).change();

              if ($country.val() == "") {
                $country.find("option[value=" + 20 + "]").prop("selected", true).change();
              } else {
                countryChange($country, true);
              }
              if (lcFormOption.country_option_reject) {
                $.each(lcFormOption.country_option_reject, function (index, value) {
                  $country.find("option[value=" + value + "]").remove();
                });
              }

            });

            $product_sku_id.change(function () {
              productSet();
              if ($(this).find(":selected").data("type") == "regular_group") {
                $("#regular_hidden").html(
                  '<input type="hidden" id="ec_client_landing_page_type_regular_interval" name="ec_client_landing_page_type[regular_interval]" value="' +
                  $(this).find(":selected").data("regular_interval") + '">');
              } else {
                $("#regular_hidden").html('');
              }
              if ($(this).find(":selected").data("type") == "regular_group") {
                $(".pymRgrTxt").delay(1000).show();
              } else {
                $(".pymRgrTxt").delay(1000).hide();
              }
            });
            if ($(this).val() == "") {
              $payment_id.val("").change();
            }
            //
            //メールチェック
            $('#ec_client_landing_page_type_email, #mail_check').on('focus blur keypress', function () {
              if ($("#ec_client_landing_page_type_email").val() == $("#mail_check").val()) {
                $("#mail_check-error").css("display", "none");
              } else {
                $("#mail_check-error").css("display", "");
              }
            });

            $("#tel_check-error").css("display", "none");
            $tel.on("change", function () {
              if ($country.val() == '20') {
                if ($tel.val() != "") {
                  if ($tel.val().length === 10) {
                    $("#tel_check-error").css("display", "none");
                  } else {
                    $("#tel_check-error").css("display", "");
                  }
                } else {
                  $("#tel_check-error").css("display", "none");
                }
              } else {
                $("#tel_check-error").css("display", "none");
              }
            });

            $quantity.change(function () {
              refer();
            });
            $payment_id.change(function () {
              showcredit();
            });
            $delivery_abroad_id.change(function () {
              changeDelivery();
            });
            $country.change(function (e) {
              //countryChange(this);
            });

            $(".product_total").text(prices[Object.keys(prices)[0]] * $('select[name="quantity"]').val());
            $quantity.change(function () {
              $(".product_total").text(prices[Object.keys(prices)[0]] * $('select[name="quantity"]').val());
            });

            if (lcFormOption.hyphen_reject) {
              if ($tel.val() == "--") {
                $tel.val('');
              }
              if ($zipcode.val() == "-") {
                $zipcode.val('');
              }
              if ($sex.val() == "-") {
                $sex.val('');
              }
            }
            //都道府県非表示
            if (lcFormOption.district_tr_reject) {
              $('#district_tr').hide();
            }




            if ("") {
              $("#ec_client_landing_page_type_quantity").val("");
            } else {
              $("#ec_client_landing_page_type_quantity").val("1");
              $("#tmp_quantity").val("1");
            }

            $("#city").val("");

            if ("") {
              cityChange();
            }

            $('#city').change(function () {
              $("#ec_client_landing_page_type_locality").val("");
              cityChange();
            });

            $('#street').change(function () {
              $("#ec_client_landing_page_type_locality").val($('#city').val() + $('#street option:selected')
                .text());
              $("#ec_client_landing_page_type_zipcode").val($('#street').val()).change();

              if ($('#street').val() == "") {
                $("#ec_client_landing_page_type_locality").val("");
              }
            });

          });

          function countryChange(e, init) {
            var req = "";
            if (!init) {
              $("#ec_client_landing_page_type_locality,#ec_client_landing_page_type_zipcode,#city").val("");
            }

            var $elm = $(e).val();
            if (countryFormReject[$elm]["payment"]) {
              $payment_id.find("option").prop("disabled", false).css("display", "block");
              $.each(countryFormReject[$elm]["payment"], function (index, value) {
                $payment_id.find("option[value=" + value + "]").prop("disabled", true).css("display", "none");
                if ($payment_id.find("option:selected").val() == value) {
                  $payment_id.find("option").prop("selected", false).change();
                }
              });
            } else {
              $payment_id.find("option").prop("disabled", false).css("display", "block");
            }

            if (countryFormReject[$elm]) {

              $.each(countryFormReject[$elm], function (index, value) {

                if (value) {
                  if (!init) {
                    $("#" + index).css("display", "").find("input,select").val("").change();
                  }
                } else {
                  $("#" + index).css("display", "none").find("input").val("999999");
                }
              });
            }
            if ($elm == "1") {
              $('#ec_client_landing_page_type_zipcode1').zip2addr({
                zip2: '#ec_client_landing_page_type_zipcode2',
                pref: '#ec_client_landing_page_type_district',
                addr: '#ec_client_landing_page_type_locality'
              });
              $('#delivery_name').show();
              $delivery_abroad_id.val('');
              $delivery_abroad_id.hide();
              $('#delivery_day_tr').show();
              $('#delivery_time_tr').show();
            } else {
              $delivery_abroad_id.show();
              $('#delivery_name').hide();
              $('#delivery_day_tr').hide();
              $('#ec_client_landing_page_type_delivery_day').val('');
              $('#delivery_time_tr').hide();
              $('#ec_client_landing_page_type_delivery_time').val('');
            }
          }

          function cityChange() {
            $("#street option").remove();
            var option = $("<option>").val("").text("區域");
            $("#street").append(option);
            $("#street").prop("disabled", true);
            $.ajax({
              type: 'GET',
              url: '/js/zipcode.json',
              dataType: 'json',
              success: function (json) {
                if ($("#city").val() != "") {
                  for (var i = 0; i < json[$("#city").val()].length; i++) {
                    var option = $("<option>").val(json[$("#city").val()][i][1]).text(json[$("#city").val()][i][
                      0
                    ]);
                    $("#street").append(option);
                  }
                }
                $("#street").prop("disabled", false);

                if ("") {
                  $("#street").val("");

                }
              }
            });
          }

          function set_TWD(p) {
            return Math.round(p).toLocaleString();
          }

          function productChange(p) {
            var dd = $("#ec_client_landing_page_type").offset().top;
            // $('html,body').animate({ scrollTop: dd },0);
            if (p) {
              $('html,body').animate({
                scrollTop: dd
              }).promise().done(function () {
                $product_sku_id.val(p).change();
                $("#skuid").val($product_sku_id.val());
              });
            }
          }

          function productSet() {
            var skuId_val = $product_sku_id.val();
            if ($quantity.val() == 0) {
              $quantity.val(1).change();
            } else {
              refer();
            }
            $quantity.attr("name", "ec_client_landing_page_type[quantity][" + skuId_val + "]");
            getInfo(skuId_val, $("#pay_id").val(), 'pay', "請選擇付款方式", "ec_client_landing_page_type_payment",
              post_payment, "");
            getInfo(skuId_val, $("#del_id").val(), 'del', "請選擇送貨方式", "ec_client_landing_page_type_delivery_abroad",
              post_delivery_abroad);

          }

          function refer() {
            var additions = {}
            $('select[name^=additions]').map(function () {
              additions[this.name.match(/\[(\d+)\]/)[1]] = this.value;
            });
            for (var i = 1; i < $("#priceTable tr").length; i++) {
              var p = Number($("#priceTable tr").eq(i).find(".skuPrice2").html().trim().replace(",", ""));
              var q = Number($("#priceTable tr").eq(i).find("select").val());

              $("#priceTable tr").eq(i).find(".payment_total").text(Number(p * q).toLocaleString());
              $("#priceTable tr").eq(i).find(".payment_total_jp").text(Number(p * q * ratio).toLocaleString());
            }

            $.ajax({
              type: "POST",
              async: false,
              url: "/ec/landing_page/current_payment_total",
              data: {
                "product_id": 21,
                "product_sku_id": $product_sku_id.val(),
                "quantity": $quantity.val(),
                "prefecture": $prefecture.val(),
                "sex": $sex.val(),
                "country_id": $country.val(),
                "payment_id": $payment_id.val(),
                "delivery_abroad_id": $delivery_abroad_id.val(),
                "additions": additions,
              },
            }).done(function (res) {

              if (res.errors.length == 0) {
                $(".skuPrice2").text(set_TWD(Number($("#ec_client_landing_page_type_product_sku_id option:selected")
                  .attr("data-price"))) + "TWD");
                //$(".payment_total_jp").text(Number(res.payment_total).toLocaleString());
                $(".payment_total").text(Math.round(Number(res.payment_total)).toLocaleString());
                $quantity.prop('disabled', false);
              } else {
                console.log(res.errors);

                $("#ec_client_landing_page_type_product_sku_id").val("");
                $quantity.val(0);
                $(".payment_total").text(0);
                //$(".payment_total_jp").text(0);
                $(".skuPrice2").text("-");
                $quantity.prop('disabled', true);

              };
            }).fail(function (result) {
              console.log(result);
            });
          }

          function showcredit() {
            if ($payment_id.val() == credit_card_id || $payment_id.val() == express_pay_id) {
              $(".card").show();
              $(".after_pay").hide();
              $(".paypelArea").hide();
              $(".np_atobarai").hide();
            } else if ($payment_id.val() == after_pay_id) {
              $(".card").hide();
              $(".after_pay").show();
              $(".paypelArea").hide();
              $(".np_atobarai").hide();
            } else if ($('#ec_client_landing_page_type_payment').val() == np_pay_id) {
              $(".card").hide();
              $(".after_pay").hide();
              $(".np_atobarai").show();
              //$(".Np_atobarai").hide();
            } else {
              $(".card").hide();
              $(".after_pay").hide();
              $(".paypelArea").hide();
              $(".np_atobarai").hide();
            }
            $("#pay_id").val($payment_id.val());
          }

          function changeDelivery() {
            $("#del_id").val($delivery_abroad_id.val());
            if (lcFormOption.deliveryTime) {
              getDeliveryDayTime('day', $("#day_value").val(), 7, "ec_client_landing_page_type_delivery_day",
                "Delivery Day");
              getDeliveryDayTime('time', $("#time_value").val(), 2, "ec_client_landing_page_type_delivery_time",
                "Delivery time");
            }
          }

          function Send() {
            $payment_id.prop("disabled", false);
            if ($("#mail_check")[0]) {
              if ($("#ec_client_landing_page_type_email").val() != $("#mail_check").val()) {
                return false;
              }
            }

            $('input[name="ec_client_landing_page_type[option1]"]').val(ratio);
            $('input[name="ec_client_landing_page_type[option2]"]').val($(
              "#ec_client_landing_page_type_product_sku_id option:selected").attr("data-price"));
            $('input[name="ec_client_landing_page_type[option3]"]').val($("#ec_client_landing_page_type_quantity")
              .val());
            $('input[name="ec_client_landing_page_type[option4]"]').val($(".payment_total").html().trim().replace(",",
              ""));

            var additions = {}
            $('select[name^=additions]').map(function () {
              additions[this.name.match(/\[(\d+)\]/)[1]] = this.value;
            });

            $.ajax({
              type: "POST",
              async: false,
              url: "/ec/landing_page/current_payment_total",
              data: {
                "product_id": 21,
                "product_sku_id": $product_sku_id.val(),
                "quantity": $quantity.val(),
                "prefecture": $prefecture.val(),
                "country_id": $country.val(),
                "payment_id": $payment_id.val(),
                "delivery_abroad_id": $delivery_abroad_id.val(),
                "additions": additions,
                "last_name": $last_name.val(),
                "first_name": $first_name.val(),
                "zipcode": $zipcode.val(),
                "tel": $tel.val(),
                "district": $prefecture.val(),
                "sex": $sex.val(),
                "country": $country.val(),
                "locality": $locality.val(),
                "street": $street.val(),
                "regular_interval": $("#ec_client_landing_page_type_regular_interval").val(),
              },
            }).done(function (res) {
              if (res.errors.length == 0) {
                if ($payment_id.val() == credit_card_id) {
                  doPurchase();
                } else if ($payment_id.val() == np_pay_id) {
                  // Afteeへ渡すチェックサム等のパラメータ受け取り
                  console.log(res.npdata);
                  if ($np_flag == 1) {
                    Aftee.merge({
                      payment: res.npdata,
                    });
                    Aftee.sync();
                    Aftee.start();
                  }
                  if ($np_flag == 0) {
                    Aftee.config({
                      pub_key: "YOzCgVpjNAH__cJnUnJ9Bg",
                      payment: res.npdata,
                      // 認証が完了したタイミング、または会員登録が完了したタイミングで呼び出し
                      authenticated: function (authentication_token, user_no) {
                        // コールバックを実装
                        console.log('authenticated');
                        console.log(authentication_token + ", " + user_no);
                        $("#ec_client_landing_page_type_authentication_token").val(authentication_token);
                      },
                      // モーダルを閉じたタイミングで呼び出し
                      cancelled: function () {
                        // コールバックを実装
                        console.log('cancel');
                        $np_flag = 1;
                      },
                      // 決済がNGとなった後、ボタンを押してフォームを閉じたタイミングで呼び出し
                      failed: function (response) {
                        // コールバックを実装
                        $('#ec_client_landing_page_type_payment').children('option').each(function () {
                          if ($(this).val() == np_pay_id) {
                            $(this).remove();
                          }
                        });
                        window.alert('Please select other payment');
                      },
                      // 決済がOKとなり自動でフォームが閉じたタイミングで呼び出し
                      succeeded: function (response) {
                        // コールバックを実装
                        console.log('succeeded');
                        console.log(response.id);
                        $("#ec_client_landing_page_type_shop_transaction_no").val(res.npdata
                          .shop_transaction_no);
                        $("#ec_client_landing_page_type_token").val(response.id);
                        $("#ec_client_landing_page_type").submit();
                      },
                      // エラーが発生したタイミングで呼び出し
                      error: function (name, message, errors) {
                        // コールバックを実装
                        console.log('error');
                      }
                    }, Aftee.start);
                  }
                } else {
                  preLoad();
                  $("#ec_client_landing_page_type").submit();
                }
              } else {
                $("#product").val("");
                $quantity.val(0);
                $(".payment_total").text(0);
                //$(".payment_total_jp").text(0);
                $("#skuid").val("");
                $(".skuPrice2").text("-");
                $quantity.prop('disabled', true);
                console.log("fail");
                console.log(res);

              };
            }).fail(function (result) {
              // console.log(result);
            });
            return false;
          }

          var htmlLang = $('html').attr('lang');

          function FormValidation(key, lang) {

            if (validationInit[key][lang]) {

              this.validate = validationInit[key][lang];
            } else {
              this.validate = validationInit[key];
            }
            if (key === "ec_client_landing_page_type_sex") {
              //console.log("key is ", key, ";lang is ", lang);
              //console.log("this.validate is", this.validate);
            }
            this.$target = $("#" + key);
          }
          FormValidation.prototype = {
            confirmRequire: function () {
              if (this.$target.get(0).tagName === 'CHECKBOX') {
                return this.$target.prop('checked')
              } else if (this.$target.get(0).tagName === 'DIV') {
                return (this.$target.find('input:checked').length > 0)
              } else {
                return this.$target.val() ? true : false
              }
            },
            confirmMax: function () {
              if (this.validate['max']) {
                return this.$target.val().length <= this.validate['max'];
              } else if (validate['num_max']) {
                return this.$target.val().length <= this.validate['num_max'];
              }
            },
            confirmEq: function () {
              return this.$target.val().length == this.validate['eq'];
            },
            confirmMin: function () {
              if (this.validate['min']) {
                return this.$target.val().length >= this.validate['min'];
              } else if ('num_min' in this.data.validate) {
                return this.$target.val().length >= this.validate['num_min'];
              }
            },
            confirmNumber: function () {
              return this.$target.val().match(/^[0-9]+$/);
            },
            confirmAlpha: function () {
              return this.$target.val().match(/^[a-z]+$/);
            },
            confirmEmail: function () {
              return (this.$target.val().match(/[!#-9A-~]+@+[a-z0-9]+.+[^.]$/i) && this.$target.val().length < 255);
            },
            confirmNoHTML: function () {
              return !this.$target.val().match(/<(".*?"|'.*?'|[^'"])*?>/);
            },
            errorMsgSet: function (item, text) {
              var error = "";
              var template = "";
              if (validationErrorWording[item][htmlLang]) {
                template = validationErrorWording[item][htmlLang];
              } else {
                template = validationErrorWording[item]["def"];
              }
              if (text) {
                template = template.replace(new RegExp("\\{" + item + "\\}", "g"), text);

              }
              error += template;

              return error;
            },
            errorMsgDisplay: function (msg) {
              var pos = this.$target.offset();
              this.$target.before(
                "<span class='error' style='position:absolute;background-color:rgba(255,255,255,0.6);color:red;font-size:14px;padding:0 8px;white-space: nowrap;line-height: 28px;height: 28px;border: 1px solid #f30;left: 0;bottom: 100%;'>" +
                msg + "</span>");

            },
            confirm: function () {
              var is_valid = true;
              if (this.validate["noHtml"]) {
                if (!this.confirmNoHTML()) {
                  this.errorMsg = this.errorMsgSet("noHtml");
                  is_valid = false;
                }
              }
              if (this.validate["email"]) {
                if (!this.confirmEmail()) {
                  this.errorMsg = this.errorMsgSet("email");
                  is_valid = false
                }
              }
              if (this.validate["alpha"]) {
                if (!this.confirmAlpha()) {
                  this.errorMsg = this.errorMsgSet("alpha");
                  is_valid = false;
                }
              }
              if (this.validate["min"]) {
                if (!this.confirmMin()) {
                  this.errorMsg = this.errorMsgSet("min", this.validate["min"]);
                  is_valid = false;
                }
              }
              if (this.validate["max"]) {
                if (!this.confirmMax()) {
                  this.errorMsg = this.errorMsgSet("max", this.validate["max"]);
                  is_valid = false;
                }
              }
              if (this.validate["eq"]) {
                if (!this.confirmEq()) {
                  this.errorMsg = this.errorMsgSet("eq", this.validate["eq"]);
                  is_valid = false;
                }
              }
              if (this.validate["number"]) {
                if (!this.confirmNumber()) {
                  this.errorMsg = this.errorMsgSet("number");
                  is_valid = false;
                }
              }
              if (this.validate["required"] == true) {
                if (!this.confirmRequire()) {
                  if (this.$target.get(0).tagName === 'INPUT' || this.$target.get(0).tagName === 'DIV') {
                    this.errorMsg = this.errorMsgSet("required");
                  } else if (this.$target.get(0).tagName === 'SELECT') {
                    this.errorMsg = this.errorMsgSet("required_select");
                  }
                  is_valid = false;
                }
              }
              return is_valid;
            }
          }

          $.each(validationInit, function (key, index) {
            $("#" + key).on("blur", function () {
              var validateFormInst = new FormValidation(key, 20);
              $(this).prev(".error").remove();
              if (!validateFormInst.confirm()) {
                validateFormInst.errorMsgDisplay(validateFormInst.errorMsg);
              }
            });
            $("#" + key).on("change", function () {
              var validateFormInst = new FormValidation(key, 20);
              if (validateFormInst.confirm()) {
                $(this).prev(".error").remove();
              }
            });
          });
          $country.on("change", function (e) {
            var lang = $(this).val();
            $.each(validationInit, function (key, index) {
              $("#" + key).off("blur");
              $("#" + key).prev(".error").remove();
              $("#" + key).on("blur", function () {
                var validateFormInst = new FormValidation(key, lang);
                $(this).prev(".error").remove();
                if (!validateFormInst.confirm()) {
                  validateFormInst.errorMsgDisplay(validateFormInst.errorMsg);
                }
              });
            });
          });
          $("#btnSend").on("click", function (e) {
            e.preventDefault();
            var is_valid = true;
            var lang = $country.val();
            $.each(validationInit, function (key, index) {
              $("#" + key).prev(".error").remove();
              var validateFormInit = new FormValidation(key, lang)
              if (!validateFormInit.confirm()) {
                if (key === "ec_client_landing_page_type_sex") {
                  // console.log("validateFormInit.confirm() return 了:", validateFormInit.confirm());
                }
                validateFormInit.errorMsgDisplay(validateFormInit.errorMsg);
                is_valid = false;
              }
            });
            if (is_valid) {
              Send();
            } else {
              var dd = $("#ec_client_landing_page_type").offset().top;
              $('html,body').animate({
                scrollTop: dd
              });
            }
          });
        </script>
        <script type="text/javascript" src="resources/js/jquery.blockUI.js"></script>
        <script type="text/javascript">
          <!--
          function showBlockUIConfirm(msg) {
            $.blockUI({
              message: '<div class="blockUIcontent"><p>' + msg +
                '</p><input type="button" id="btnBlockUIOK" value="OK" OnClick="btnBlockUIOK_click_conf()" /> ' +
                '<input type="button" id="btnBlockUICancel" value="Cancel" OnClick="btnBlockUICancel_click()" /></div>'
            });
          }

          function btnBlockUIOK_click_conf() {
            $.unblockUI();
            document.getElementById("hdnSendChk").value = "submit";
            document.getElementById("landing").submit();
            $.blockUI({
              message: "數據發送！ <br/>了一會兒，請...",
              css: {
                border: 'none',
                padding: '30px',
                backgroundColor: '#FFFFFF',
                '-webkit-border-radius': '10px',
                '-moz-border-radius': '10px',
                color: '#666666'
              }
            });
          }

          function btnBlockUICancel_click() {
            document.getElementById('btnSend').style.visibility = "visible";
            $.unblockUI();
            return false;
          }
          //
          -->
        </script>
      </div>
    </div>
    <!-- FOOTER -->
    <div class="footer">
      <div class="footerLeft">
        <div class="logo"><a href="index.html"><img src="resources/homepage/images/logo_footer.png" alt=""></a>客服中心
        </div>
        <p>電話：（02）2366-1900<br>
          EMAIL：service@asian-bridge.com.tw<br>
          服務時間：週一至週五9:00-18:00（國定假日除外）</p>
      </div>
      <div class="footerRigth">
        <ul>
          <li>關於我們</li>
          <!-- <li>聯絡我們</li> -->
          <li><a href="privacy.html">隱私條款</a></li>
          <li><a href="teiki.html">退費保證</a></li>
          <li><a href="plan_guide.html">定期說明</a></li>
        </ul>
        <ul>
          <li>SITEMAP</li>
          <li><a href="element.html">主要成分</a></li>
          <li><a href="products.html">產品介紹</a></li>
          <li><a href="reviews.html">使用心得</a></li>
          <li><a href="faq.html">常見問題</a></li>
        </ul>
      </div>
    </div>
  </div>
  <link rel="stylesheet" href="resources/homepage/css/content.css">
</body>

</html>